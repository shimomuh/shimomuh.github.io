# マークダウンの Table に対応する

タグ `このサイトの生い立ち` `Ruby`

## 対象者

マークダウンの Table を自前で実装しようと検討している人（そんな車輪の再開発大好きな人いない気がするけど）

## 結論

[→成果](https://github.com/shimomuh/shimomuh.github.io/commit/1c1fedc9afffdffed79f303545053cc809af7e57)

以下のように表示される

|カラム1|カラム2|
|---|---|
|あいう|えおか|

## 過程

今までの繰り返しだが、基本的にやったことは

* はじめに文構造を見てフラグを立てる
* 様々な処理の終わり（他のタグやエスケープ処理のあと）でフラグをみて `|` (パイプ) を書き換える

の2つ

加えて、この処理方法の欠点としてページの終わりが表を表すタグだった場合閉じタグ処理が実行されないので、文末だったらフラグをみて未処理の文法があればその終了処理をした

```ruby
texts.each do |text|
  flag_table_tag(text) # テキストをみてフラグを立てる
  # ...他のタグ処理やエスケープ処理...
  replace_table_tag(text) # フラグをみて `|` を置換する
end
add_last_tag # 万一文末で閉じタグ処理を行なっていなければフラグをみてここで行う
```

これがベストだとは思っていないが、現状私が考えるのはこんな感じ
