# 適切なポリゴン数を定義してモデリングし直す

タグ `理想のモデルを作りたい` `Blender` `モデリング`

## 対象者

適切なポリゴン数を知りたい人

## 背景

ふと今のポリゴン数で Web に公開できるようなサイズなのか？と疑問を持った

 

そこで参考サイトとして FBX ファイルを WebGL で表示している threejs のサンプルと比較することにした

その結果自分にとって最適そうなポリゴン数が見えてきたのでそれにしたがってモデルを修正することにした

## 結論

今日は顔だけ

![](/static/diary/2019-08-27/face.gif)

## 過程

### 想定される場所を考える

まずはこのモデルをどこで使うか

様々なところで使いまわしたかったので、現状想定しているものがアプリと Web だったので表示に時間がかかりそうな Web でストレスなくモデルを表示できる時間を基準とした

### ストレスなくモデルを表示する（ロードにかかる）時間とは何か

ところで、 Web で fbx ファイルを表示するにはロードが必要である

昨今デバイスの性能向上は著しいが、それでも瞬時に表示するには至っていない（ファイルI/Oもあるし限界はある）

昔から Web では人間が待てそうな時間は 2 秒程度（参考：[ページ読み込みは「2秒以内」に - 3秒待てないモバイルユーザー、画像圧縮で表示速度改善を](https://boxil.jp/beyond/a5835/)）と言われているので、今回はその時間を基準に考えた

### 表示の参考になりそうなものを探す

自分でモデルを読み込むサンプルを作って確認してもよいが、今回はちょうどよいサンプルがあった

[three.js examples](https://threejs.org/examples/#webgl_loader_fbx)

このサンプルサイトで表示されているモデルが初回に表示されるまでの体感時間は理想のおよそ 2 秒

データ量が大きくなりそうなテクスチャこそ含まれていないが、three.js でボーンを入れてアニメーションさせる想定だったので、これを一つの基準とする

ちなみに、このモデルは three.js 公式から落としてくることができるので計測したところ `55,320` ポリゴンだった

 

他にも仕事の伝手を利用して Web に three.js を使って fbx を表示しているサイトと表示しているモデルのポリゴン数が調査できた（嗚呼、なんて運がいいんだ、神に感謝）

詳細はお伝えできないが、ロード時間は 2 秒弱でテクスチャとアニメーションつき、ポリゴン数は `1099` ポリゴンだった

お察しの通り少しモデルが粗い

### 自分がこの程度のきめ細かさは実現したいと思うモデルを探す

テクスチャのロードがどの程度か計り知れないが、どうやら `55,320` > x > `1099` の定義域の範囲でモデルを実現してやれば、最終的にテクスチャなどの読み込み時間を含んでも f(x) ≒ 2.0 sec に抑えられそうである

 

それを承知の上で、自分は先ほど `1099` ポリゴンのモデルを "粗い" と表現した

その通り。納得していない

では、許容できるモデルはどんなものだろうか

 

自身が納得できそうなポリゴンを見つけてきた

[SDユニティちゃん 3Dモデルデータ ダウンロード](http://unity-chan.com/download/releaseNote.php?id=SDUnityChan)

この humaroid を Blender で表示したところ `8,161` ポリゴンだった

ちょうどいい塩梅かなと感じたため、今回はこれを目指してテクスチャを貼ってアニメーションつけてロードしたら約2秒！を目指す

 

このモデルを徹底的に研究してこだわっているところと妥協したところを確認しながら自分のモデルに適応したのが今回の結果である

## 余談

耳の位置がおかしい位置に生えているが、これは原作（[千円健康スポット探検隊](https://kencom.jp/tags/360)）を踏襲して、様々な角度から見ても漫画で描いたときの見た目と同じような位置に耳がくるように作っているので意図的なものだったりする
